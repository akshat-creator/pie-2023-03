<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Software Design</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="main.css">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary fixed-top" data-bs-theme="dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">cam-track</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="team.html">About Us</a>
            </li>
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Product Details
              </a>
              <ul class="dropdown-menu">
                <li style="margin-left:0px"><a class="dropdown-item" href="mechanical.html">Mechanical Design</a></li>
                <li style="margin-left:0px"><a class="dropdown-item" href="electrical.html">Electrical & Firmware Design</a></li>
                <li style="margin-left:0px"><a class="dropdown-item" href="software.html">Software Design</a></li>
                <li><hr class="dropdown-divider"></li>
                <li style="margin-left:0px"><a class="dropdown-item" href="budget.html">Bill of Materials</a></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Sprints
              </a>
              <ul class="dropdown-menu">
                <li style="margin-left:0px"><a class="dropdown-item" href="sprint_1.html">Sprint 1</a></li>
                <li style="margin-left:0px"><a class="dropdown-item" href="sprint_2.html">Sprint 2</a></li>
                <li style="margin-left:0px"><a class="dropdown-item" href="sprint_3.html">Sprint 3</a></li>
              </ul>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="gallery.html">Gallery</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container sec-title">
      <div class="card mx-auto img-fluid section-card" style="background-color: gray;">
          <h1 class="card-text" style="color:white; font-size: 50px;">Software Design</h1>
      </div>
    </div>


    <div class="overview">
      <h4>Raspberry Pi</h4>
      <br>
      <div class="row">
        <div class="col">
          <img src="assets/final_prod_assets/rasp_pi.jpg" style="width: 100%">
        </div>
        <div class="col">
          <img src="assets/final_prod_assets/picamera.jpg" style="width: 100%">
        </div>
        <div class="col-5">
          <p>
            We first access the Raspberry Pi's camera through the python picamera2 module. In order to read the camera,
            we use the module to save the current frame as a NumPy array every timestep. The image's colorspace
            is then converted from RGB to BGR in order to align with OpenCV standards. OpenCV then reads and visualizes
            the NumPy array, which allows use to perform object detection and tracking on it.
          </p> 
        </div>
      </div>
    </div>

    <div class="overview">
      <h4>Object Detection</h4>
      <br>
      <div class="row">
        <div class="col">
          <img src="assets/sprint_2_detect.gif" style="width: 80%">
        </div>
        <div class="col-7">
          <p>The gif to the left represents the person detection step of our software. A Single-Shot Multibox Detection
            Deep Neural Network detects the person and returns the following:
          </p>
          <li>Bounding Box</li>
          <li>Confidence Value</li>
          <li>Object ID</li>
          <p>While this does a great job at detecting the subject, performance is too low for our project's purposes.</p>
        </div>
      </div>
    </div>

    <div class="overview">
      <h4>Object Tracking</h4>
      <br>
      <div class="row">
        <div class="col">
          <img src="assets/sprint_3_detect.gif" style="width: 100%">
        </div>
        <div class="col-6">
          <p>To resolve this, we also initiate a tracking step, which takes the detected bounding box as an input. Unlike object detection,
            object tracking uses the previous frame to estimate the change in pixels over time. This allows it to continue to track a 
            detected person, without needing to expend the computational energy to re-detect the subject every frame. As a result,
            performance is greatly increased.
          </p>
          <p>
            As the subject is tracked, the center of the bounding box is saved as a coordinate pair. The coordinates are then normalized
            so that the center of the screen is (0,0). Once the bounding boxes have been normalized, they are sent over to the Arduino
            via serial port.
          </p> 
        </div>
      </div>
    </div>

    <div class="overview">
      <h4>Software Loop</h4>
      <br>
      <div class="row">
        <div class="col-5" style="margin-left: 500px;">
          <img src="assets/sprint_3_code_structure.PNG" style= "height:350px; width:auto;">
          <figcaption>Our software loop. By only re-detecting occasionally, we maintain
            good performance, while ensuring that the track doesn't slip off of the subject.





            
          </figcaption>
        </div>
    </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  </body>
</html>